{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Motion Store</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'tienda/css/motion.css' %}">
</head>

<body>

<!-- NAVBAR -->
<nav class="motion-navbar">
    <div class="nav-left">
        <div class="hamburger" onclick="toggleMenu()">â˜°</div>
    </div>

    <div class="nav-center">
        <span class="brand-main">MOTION</span>
    </div>

    <div class="nav-right">
        {% if user.is_authenticated %}
            <a href="/carrito/">ðŸ›’ Carrito</a>
            <a href="/usuarios/logout/">Salir</a>
        {% else %}
            <a href="/usuarios/login/">Login</a>
            <a href="/usuarios/registro/">Registro</a>
        {% endif %}
    </div>
</nav>

<!-- MENU LATERAL -->
<div id="menuCategorias" class="side-menu">
    <div class="menu-header">ðŸŽ¬ CategorÃ­as</div>
    {% for cat in categorias %}
        <a href="/categoria/{{ cat.id }}/" class="menu-item">{{ cat.nombre }}</a>
    {% endfor %}
</div>

<!-- CONTENIDO -->
<div class="container mt-4">
  <div class="row">

    {% for p in productos %}
    <div class="col-md-3">
      <div class="card movie-card mb-4">

        {% if p.imagen %}
          <a href="/producto/{{ p.id }}/">
            <img src="{{ p.imagen.url }}" class="card-img-top movie-img">
          </a>
        {% endif %}

        <div class="card-body text-center">

          <h6 class="movie-title">
              <a href="/producto/{{ p.id }}/" class="movie-link">
                  {{ p.nombre }}
              </a>
          </h6>

          <p class="movie-price">${{ p.precio }}</p>

          {% if user.is_authenticated %}
            <a href="/carrito/agregar/{{ p.id }}/" class="btn btn-primary btn-sm w-100">
                Agregar al carrito
            </a>
          {% else %}
            <a href="/usuarios/login/" class="btn btn-secondary btn-sm w-100">
                Login para comprar
            </a>
          {% endif %}

        </div>
      </div>
    </div>
    {% endfor %}

  </div>
</div>

<!-- JS -->
<script>
function toggleMenu(){
    document.getElementById("menuCategorias").classList.toggle("active");
}
</script>

</body>
</html>
